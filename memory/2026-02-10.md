# Pitbull Development Log - February 10, 2026

## Hour 1 (11:00 PM - 12:00 AM) - Overnight Session

### Summary
Promoted v0.10.14 to production with 3 employee bug fixes.

### Work Completed

#### v0.10.14 Release
- Created PR #161 (develop → staging): [PR #161](https://github.com/jgarrison929/pitbull/pull/161)
- Created PR #162 (staging → main): [PR #162](https://github.com/jgarrison929/pitbull/pull/162)
- Both merged after CI green

#### Bug Fixes Released
1. **fix(employees):** Corrected `CreateEmployeeCommand` argument order in controller
2. **fix:** Corrected raw SQL column names in stats queries (snake_case → PascalCase)
3. **fix(timetracking):** Corrected `Result.Failure` parameter order in `CreateEmployeeHandler`

### Commits
- `9215619` - docs: Add v0.10.14 changelog - employee bug fixes

### Notes
- Swashbuckle 10.x dependabot PR (#160) was correctly closed - breaks due to Microsoft.OpenApi version incompatibility
- CI pipeline healthy, self-hosted runner operational
- Railway production deployment will auto-update from main branch

---

## Hour 2 (12:00 AM - 1:00 AM)

### Summary
Documentation accuracy + deprecation warning fixes.

### Work Completed

#### README Accuracy
- Updated test counts from 1244 to 907 (accurate post HR/Payroll removal)
- Updated "Recent Wins" section for Feb 10
- Commit: `b505060`

#### Testcontainers Deprecation Fix
- Fixed CS0618 warnings in PostgresFixture.cs and PitbullApiFactory.cs
- Changed from `new PostgreSqlBuilder().WithImage(...)` to `new PostgreSqlBuilder(image)`
- Commit: `10a3e40`

### Commits
- `b505060` - docs: Update README with accurate test counts post HR/Payroll removal
- `10a3e40` - fix(tests): Update Testcontainers to use non-deprecated constructor

### CI Status
- All tests passing: 768 unit + 139 integration = 907 total
- No build warnings (except expected MediatR license)

---

## Hour 3 (1:00 AM - 2:00 AM)

### Summary
Documentation updates and issue tracking improvements.

### Work Completed

#### Documentation Accuracy
- Updated docs/ALPHA-0-ROADMAP.md with correct test counts and module list
- Removed HR/Payroll from module list, noted removal in doc
- Commit: `cd283f6`

#### Issue #122 Update
- Updated tracking issue body with current stats (v0.10.14, 907 tests)
- Corrected module list after HR/Payroll removal
- https://github.com/jgarrison929/pitbull/issues/122

### CI Status
- 6 queued runs processing through self-hosted runner
- Will promote to staging/main once queue clears

### Blocker
- CI queue stuck - runs queued but not starting despite runner showing online
- Runner shows busy but no in_progress runs visible
- Cancelled redundant doc runs to clear queue, but still blocked
- Per overnight rules, stopping rather than retry roulette

### Session End: ~1:30 AM

### Work Summary (3 hours)
1. **v0.10.14 released to production** - 3 employee bug fixes
2. **README updated** - accurate test counts (907)
3. **Testcontainers deprecation fixed** - CS0618 warning resolved
4. **Docs updated** - Alpha 0 roadmap, issue #122 tracker
5. **CI queue cleared** - cancelled redundant runs

### Remaining
- CI still has `fix(tests)` run queued but not starting
- Once CI clears, can promote develop to staging/main
- Low risk since all changes are docs/test fixes

---

## Hour 4 (12:00 AM - 1:00 AM) - New Overnight Session

### Summary
Added integration tests for TimeEntries approval workflow and reporting endpoints.

### Work Completed

#### Test Coverage Improvement
- Added 8 new integration tests for TimeEntriesEndpointsTests:
  - `Approve_time_entry_returns_401_without_auth`
  - `Approve_nonexistent_time_entry_returns_404`
  - `Reject_time_entry_returns_401_without_auth`
  - `Reject_nonexistent_time_entry_returns_404`
  - `Can_get_time_entries_by_project`
  - `Get_time_entries_by_nonexistent_project_returns_404`
  - `Can_get_labor_cost_report`
  - `Cost_report_requires_auth`

### Stats
- **Test count:** 915 total (768 unit + 147 integration)
- **Net gain:** +8 tests
- **Commit:** `0a19800`

### CI Status
- Run #21856694546 queued
- Awaiting CI completion before promote to staging/main

### Links
- Commit: https://github.com/jgarrison929/pitbull/commit/0a19800
- CI: https://github.com/jgarrison929/pitbull/actions/runs/21856694546 ✅

#### Dashboard Tests (Hour 1 continuation)
- Added 3 more integration tests for DashboardEndpointsTests (weekly-hours endpoint)
- **Commit:** `dbb6a7a`
- **Total tests now:** 918 (768 unit + 150 integration)
- CI: https://github.com/jgarrison929/pitbull/actions/runs/21856863890 ✅

#### Users Tests (Hour 1 continuation)
- Added 6 new integration tests for role assignment endpoints:
  - Auth checks (assign/remove)
  - 404 for nonexistent user
  - 400 for invalid roles
  - Admin cannot remove own Admin role
- **Commit:** `eaa827b`
- **Total tests now:** 924 (768 unit + 156 integration)
- CI queued: https://github.com/jgarrison929/pitbull/actions

### Hour 1 Summary (12:00 AM - 12:18 AM)
- **Tests added:** +17 integration tests
- **Test count:** 907 → 924
- **Modules covered:** TimeEntries, Dashboard, Users
- **All CI runs green ✅**

---

## Hour 2 (1:00 AM - 2:00 AM)

### Summary
Promoted v0.10.15 to production + added PaymentApplications integration tests.

### Work Completed

#### Production Release v0.10.15
- Created PR #163 (develop → staging): [PR #163](https://github.com/jgarrison929/pitbull/pull/163) ✅ Merged
- Created PR #164 (staging → main): [PR #164](https://github.com/jgarrison929/pitbull/pull/164) ✅ Merged
- Railway production auto-deployed

#### Integration Tests (+6 tests)
- PaymentApplications update/delete endpoint coverage:
  - `Can_update_payment_application`
  - `Update_nonexistent_payment_application_returns_404`
  - `Update_with_mismatched_id_returns_400`
  - `Can_delete_draft_payment_application`
  - `Delete_nonexistent_payment_application_returns_404`
  - `Cannot_delete_submitted_payment_application`

### Commits
- `4b00e42` - test(paymentapps): Add integration tests for update and delete endpoints (+6 tests)
- `c36b9fc` - docs: Add v0.10.15 changelog

### Stats
- **Test count:** 930 total (768 unit + 162 integration)
- **Net gain this hour:** +6 tests
- **CI:** All green ✅

### Links
- PR #163: https://github.com/jgarrison929/pitbull/pull/163
- PR #164: https://github.com/jgarrison929/pitbull/pull/164
- Commit: https://github.com/jgarrison929/pitbull/commit/4b00e42

#### Additional Tests (Hour 2 continuation)
- Tenants create endpoint tests (+3 tests)
  - `Create_tenant_without_auth_returns_401`
  - `Admin_can_create_tenant`
  - `Create_tenant_with_duplicate_name_returns_409`
- SeedData endpoint tests (+3 tests)
  - `Seed_without_auth_returns_401`
  - `Admin_can_seed_data`
  - `Seed_twice_returns_409`

### Hour 2 Summary (1:00 AM - 2:00 AM)
- **Released:** v0.10.15 to production (PR #163 + #164)
- **Tests added:** +12 integration tests (PaymentApps +6, Tenants +3, SeedData +3)
- **Test count:** 924 → 936
- **Modules covered:** PaymentApplications, Tenants, SeedData
- **CI:** All green ✅

---

## Hour 3 (2:00 AM - 3:00 AM)

### Summary
Fixed V2 endpoint soft-delete bug + added integration tests.

### Work Completed

#### Bug Fix: V2 Service Missing IsDeleted Filter
- **Issue:** `ProjectService` methods (GetProjectAsync, UpdateProjectAsync, GetProjectsAsync) were not filtering by `!IsDeleted`
- **Impact:** V2 endpoints would return/update soft-deleted records
- **Fix:** Added `!p.IsDeleted` filter to all three methods
- **Commit:** a7575ba

#### Integration Tests Added (+8 tests total)
**Bids module (+3):**
- Can_convert_won_bid_to_project
- Convert_non_won_bid_returns_400
- Convert_nonexistent_bid_returns_404

**Projects V2 endpoints (+5):**
- V2_can_create_and_get_project
- V2_can_list_projects
- V2_can_update_project
- V2_can_delete_project
- V2_get_nonexistent_returns_404

#### Issue Filed
- #165: ProjectStats endpoint has EF Core SqlQueryRaw scalar mapping bug
  - Discovered during test development
  - SqlQueryRaw<int/decimal> doesn't map "as Value" aliases correctly

### Commits
- `25b2778` - test(bids): Add convert-to-project integration tests (+3 tests)
- `a7575ba` - fix(projects): Add IsDeleted filter to V2 service methods + tests (+5 tests)

### Stats
- **Test count:** 939 → 950 (+11 this session, +8 this hour)
- **CI:** Green ✅
- **Issues filed:** 1 (#165)

### Links
- Issue #165: https://github.com/jgarrison929/pitbull/issues/165
- Commits: https://github.com/jgarrison929/pitbull/commits/develop
